<HTML>
<HEAD>
<TITLE>Protomatter Syslog Performance Info</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">
</HEAD>
<BODY>

<A name="top">

<TABLE WIDTH="100%" BORDER=0 CELLPADDING=0 CELLSPACING=0>
<TR><TD CLASS="whitetd" ALIGN="right">
<TABLE BORDER=1 CELLPADDING=4 CELLSPACING=0>
    <TR>
        <TH><A href="../../../../index.html">Main:</a></TH>
        <TH><A href="syslog-whitepaper.html">White Paper</a></TH>
        <TH><A href="syslog-faq.html">FAQ</a></TH>
        <TH><A href="syslog-examples.html">Examples</a></TH>
        <TH><A href="package-summary.html">JavaDoc</a></TH>
        <TH><A href="classloader-warning.html">Classloader</a></TH>
        <TH>Performance</TH>
    </TR>
</TABLE>
</TD></TR>
</TABLE>


<CENTER>
<H2>Protomatter Syslog Performance</H2>
<I>Nate Sammons - May, 2003</I><BR>
<I>Covers Release 1.1.8</I>
</CENTER>
<P>


<DL>
<DT><B>Performance Testing Tool</B></DT>
<DD>

The <tt><a href="PerformanceTest.html">PerformanceTest</a></tt> class
includes a good performance testing rig for testing
log policies, loggers, etc.<P>

With 5 threads, a file logger with buffering turned on,
running on a 650MHz PIII Coppermine Sony Vaio
laptop running RedHat Linux 7.2, kernel 2.4.9,
I saw these results:<P>


<ul>
<table border=1 cellpadding=4 cellspacing=0>

<tr>
  <th valign=top>Virtual Machine</th>
  <th valign=top><tt>Syslog.log()</tt><BR>
                 time per call</th>
  <th valign=top>Calls per second</th>
</tr>

<tr>
<td>Classic VM<BR>
    (build JDK-1.2.2_012, green threads, nojit)</td>
<td valign=top>233.9 &mu;s</td>
<td valign=top>4,276</td>
</tr>

<tr>
<td>Java(TM) 2 Runtime Environment,<BR>
    Standard Edition (build 1.3.1_03-b03)</td>
<td valign=top>44.0 &mu;s</td>
<td valign=top>22,742</td>
</tr>

<tr>
<td>Java HotSpot(TM) Client VM<BR>
    (build 1.4.0-b92, mixed mode)</td>
<td valign=top>36.9 &mu;s</td>
<td valign=top>27,086</td>
</tr>

<tr>
<td>JRockit Virtual Machine<BR>
    (build 3.1.4-dax.appeal.se-20030319-1000)<BR>
    Native Threads, Generational Concurrent Garbage Collector &nbsp;</td>
<td valign=top>31.1 &mu;s</td>
<td valign=top>32,109</td>
</tr>

<tr>
<td>Classic VM<BR>
    (build 1.3.1, J2RE 1.3.1 IBM build cxia32131-20030410<BR>
    (JIT enabled: jitc))</td>
<td valign=top>17.3 &mu;s</td>
<td valign=top>57,844</td>
</tr>
</table>
</ul>

<P>&nbsp;<P>

With the <tt><a href="Syslog.html#setComputeCaller(boolean)">Syslog.setComputeCaller()</a></tt>
option set to <tt>true</tt>, the performance looks like this:
<P>



<ul>
<table border=1 cellpadding=4 cellspacing=0>

<tr>
  <th valign=top>Virtual Machine</th>
  <th valign=top><tt>Syslog.log()</tt><BR>
                 time per call</th>
  <th valign=top>Calls per second</th>
</tr>

<tr>
<td>Classic VM<BR>
    (build JDK-1.2.2_012, green threads, nojit)</td>
<td valign=top>1,242 &mu;s</td>
<td valign=top>805</td>
</tr>

<tr>
<td>Java(TM) 2 Runtime Environment,<BR>
    Standard Edition (build 1.3.1_03-b03)</td>
<td valign=top>309 &mu;s</td>
<td valign=top>3,242</td>
</tr>

<tr>
<td>Java HotSpot(TM) Client VM<BR>
    (build 1.4.0-b92, mixed mode)</td>
<td valign=top>197 &mu;s</td>
<td valign=top>5,079</td>
</tr>

<tr>
<td>JRockit Virtual Machine<BR>
    (build 3.1.4-dax.appeal.se-20030319-1000)<BR>
    Native Threads, Generational Concurrent Garbage Collector &nbsp;</td>
<td valign=top>249 &mu;s</td>
<td valign=top>4,011</td>
</tr>

<tr>
<td>Classic VM<BR>
    (build 1.3.1, J2RE 1.3.1 IBM build cxia32131-20030410<BR>
    (JIT enabled: jitc))</td>
<td valign=top><i>unknown</i> &mu;s</td>
<td valign=top><i>unknown</i></td>
</tr>
</table>
</ul><P>


Interestingly, the IBM JDK deadlocked while trying to create new
instances of <tt>java.lang.Throwable</tt> in rapid succession
(either single-threaded or multi-threaded).  Suffice it to
say that the <tt><a href="../util/StackTraceUtil.html">StackTraceUtil.whereAmI()</a></tt> method can
be a very slow operation, though very useful for debugging.

</DD><P>
</DL>

</BODY>
</HTML>

