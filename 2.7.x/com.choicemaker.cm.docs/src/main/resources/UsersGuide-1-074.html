<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher 2003 for Word 8.0.0.1127">
    <meta name="TEMPLATEBASE" content="Sun JavaHelp">
    <meta name="LASTUPDATED" content="12/03/03 09:28:36">
    <link rel="StyleSheet" href="document.css" type="text/css" media="screen">
    <title>5 Collections</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <table width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
          <img src="images/logo.gif" width="174" height="46" alt="ChoiceMaker Technologies Logo">
        </td>
        <td align="right" valign="top">
<a href="UsersGuide-1-073.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="UsersGuide-1-075.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table>

    <hr align="left">

    <blockquote>
<h3 >
5	 Collections
<a name="wp9002281"> </a></h3>
<p >
Collections provide support for user-defined sets, maps, and relations that can be used in matching. Collections are defined in the configuration file.
<a name="wp9002282"> </a></p>
<p >
The implementation is in the main branch of the ChoiceMaker core. Hence, the auxiliary classes themselves are not reloaded. Still, individual collection can be made eligible for reloading by initializing them under the reload element.
<a name="wp9002283"> </a></p>
<p >
Currently only text files are supported as sources, but additional source types can be added.
<a name="wp9002284"> </a></p>
<div style="color: #000000;  font-size: 14pt; font-style: normal; font-weight: bold; margin-bottom: 3pt; margin-left: 36pt; margin-right: 0pt; margin-top: 12pt; text-align: justify; text-decoration: none; text-indent: -36pt; text-transform: none; vertical-align: baseline">
5.1	 Sets<br>
<a name="wp9002285"> </a></div>
<p >
Sets provide sets of objects. The module is loaded through the class <em>com.choicemaker.cm.xmlconf.XmlSetsInitializer</em>. The actual sets are defined as child elements, as shown in the example:
<a name="wp9002286"> </a></p>
<p >
&lt;module class=&quot;com.choicemaker.cm.xmlconf.XmlSetsInitializer&quot;&gt;
<a name="wp9002287"> </a></p>
<p >
	&lt;fileSet name=&quot;genericFirstNames&quot; file=&quot;etc/data/genericFirstNames.txt&quot;/&gt;
<a name="wp9002288"> </a></p>
<p >
	... &lt;!-- more sets --&gt;
<a name="wp9002289"> </a></p>
<p >
&lt;/module&gt;
<a name="wp9002290"> </a></p>
<p >
This loads the contents of the specified file, one element per line, into memory. E.g., the file <em>genericFirstNames.txt</em> may look like this:
<a name="wp9002291"> </a></p>
<p >
BABY
<a name="wp9002292"> </a></p>
<p >
UNKNOWN
<a name="wp9002293"> </a></p>
<p >
...
<a name="wp9002294"> </a></p>
<p >
Sets can also be loaded through Eclipse extensions in the plugin.xml file.
<a name="wp9002295"> </a></p>
<p >
Based on this, we can then use an expression like <em>!Sets.includes(&quot;genericFirstNames&quot;, first_name)</em> in the validity predicate of the <em>first_name</em> field or in a clue/rule.
<a name="wp9002296"> </a></p>
<div style="color: #000000;  font-size: 14pt; font-style: normal; font-weight: bold; margin-bottom: 3pt; margin-left: 36pt; margin-right: 0pt; margin-top: 12pt; text-align: justify; text-decoration: none; text-indent: -36pt; text-transform: none; vertical-align: baseline">
5.2	 Maps<br>
<a name="wp9002297"> </a></div>
<p >
Maps work similar to sets. The module is loaded through the class <em>com.choicemaker.cm.xmlconf.XmlMapsInitializer</em>. The actual sets are defined as child elements, as shown in the example:
<a name="wp9002298"> </a></p>
<p >
&lt;module class=&quot;com.choicemaker.cm.xmlconf.XmlMapsInitializer&quot;&gt;
<a name="wp9002299"> </a></p>
<p >
	&lt;fileMap name=&quot;firstNameFrequency10&quot; file=&quot;etc/data/firstNameFrequency.txt&quot;
<a name="wp9002300"> </a></p>
<p >
		keyType=&quot;String&quot; valueType=&quot;int&quot;/&gt;
<a name="wp9002301"> </a></p>
<p >
	&lt;!-- more maps --&gt;
<a name="wp9002302"> </a></p>
<p >
&lt;/module&gt;
<a name="wp9002303"> </a></p>
<p >
This loads the contents of the specified file, one token per line, into memory. E.g., the file <em>firstNameFrequency.txt</em> may look like this:
<a name="wp9002304"> </a></p>
<p >
JIM
<a name="wp9002305"> </a></p>
<p >
10
<a name="wp9002306"> </a></p>
<p >
JACQUES
<a name="wp9002307"> </a></p>
<p >
1
<a name="wp9002308"> </a></p>
<p >
...
<a name="wp9002309"> </a></p>
<p >
Maps can also be loaded through Eclipse extensions in the plugin.xml file.
<a name="wp9002310"> </a></p>
<p >
Based on this, we can then use an expression like <em>Maps.lookupInt(&quot;firstNameFrequency&quot;, q.first_name)</em> in a schema expression or in a clue/rule.
<a name="wp9002311"> </a></p>
<p >
All primitive Java types and <em>String</em> are supported as key and value types.
<a name="wp9002312"> </a></p>
<div style="color: #000000;  font-size: 14pt; font-style: normal; font-weight: bold; margin-bottom: 3pt; margin-left: 36pt; margin-right: 0pt; margin-top: 12pt; text-align: justify; text-decoration: none; text-indent: -36pt; text-transform: none; vertical-align: baseline">
5.3	 Relations<br>
<a name="wp9002313"> </a></div>
<p >
Relations provide support for generic relations.
<a name="wp9002314"> </a></p>
<p >
&lt;module class=&quot;com.choicemaker.cm.xmlconf.XmlRelationsInitializer&quot;&gt;
<a name="wp9002315"> </a></p>
<p >
	&lt;fileRelation name=&quot;nicknames&quot; file=&quot;etc/data/nicknames.txt&quot;
<a name="wp9002316"> </a></p>
<p >
		keyType=&quot;String&quot; valueType=&quot;String&quot; reflexive=&quot;true&quot;/&gt;
<a name="wp9002317"> </a></p>
<p >
	&lt;!-- more relations --&gt;
<a name="wp9002318"> </a></p>
<p >
&lt;/module&gt;
<a name="wp9002319"> </a></p>
<p >
This loads the contents of the specified file, one token per line, into memory. E.g., the file <em>nicknames.txt</em> may look like this:
<a name="wp9002320"> </a></p>
<p >
JIM
<a name="wp9002321"> </a></p>
<p >
JAMES
<a name="wp9002322"> </a></p>
<p >
JIMMY
<a name="wp9002323"> </a></p>
<p >
JAMES
<a name="wp9002324"> </a></p>
<p >
JOE
<a name="wp9002325"> </a></p>
<p >
JOSEPH
<a name="wp9002326"> </a></p>
<p >
...
<a name="wp9002327"> </a></p>
<p >
Relations can also be loaded through Eclipse extensions in the plugin.xml file.
<a name="wp9002328"> </a></p>
<p >
Based on this, we can then use an expression like <em>Relations.emptyIntersection(&quot;nicknames&quot;, q.first_name, m.first_name)</em> in a schema expression or in a clue/rule.
<a name="wp9002329"> </a></p>
<p >
All primitive Java types and String are supported as key and value types. The attribute reflexive governs whether the relation should be extended by (x, x) for all x. It only has an effect if the key and value types are the same.
<a name="wp9002330"> </a></p>
    </blockquote>
    <p></p>
    <hr>

    <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td valign="top">
<a href="UsersGuide-1-073.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="UsersGuide-1-075.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
        <td align="right">
         <font size="3"><b>
           ChoiceMaker Technologies<br>
         </b></font>
         <font size="3">
           <a href="http://www.choicemaker.com">http://www.choicemaker.com</a><br>
           Voice: (212) 905-6030<br>
           Fax: (212) 331-1106<br>
           <a href="mailto:info@choicemaker.com">info@choicemaker.com</a><br>
         </font>
        </td>
      </tr>
    </table>
  </body>
</html>
